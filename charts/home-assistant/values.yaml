image:
  repository: ghcr.io/home-assistant/home-assistant
  tag: "2025.8.0b2"
  pullPolicy: IfNotPresent

homeAssistant:
  configuration: |
    # Loads default set of integrations. Do not remove.
    default_config:

    # Database configuration
    recorder:
      db_url: !env_var DATABASE_URL

    # Load frontend themes from the themes folder
    frontend:
      themes: !include_dir_merge_named themes

    automation: !include automations.yaml
    script: !include scripts.yaml
    scene: !include scenes.yaml

    # HTTP configuration
    http:
      use_x_forwarded_for: true
      trusted_proxies:
        - 10.0.0.0/8
        - 172.16.0.0/12
        - 192.168.0.0/16

    # Matter support configuration
    matter:
      # Enable Matter integration for Thread and Matter-over-Wi-Fi devices
      # This will automatically discover Matter devices on the network
      # No additional configuration needed - HA will auto-discover
  
  automations: "[]"  # Empty array for now
  scripts: "{}"      # Empty object for now
  scenes: "[]"       # Empty array for now

secretRef:
  name: postgres-ha-secret

env:
  TZ: "Europe/Amsterdam"

ingress:
  enabled: true
  className: nginx
  host: ha.gcelik.dev
  tls:
    enabled: true
    secretName: ha-tls

persistence:
  enabled: true
  size: 5Gi
  storageClass: ssd-storage

# Matter support requires host networking for proper multicast communication
networking:
  hostNetwork: true
  dnsPolicy: ClusterFirstWithHostNet

# Security context for Matter support
securityContext:
  privileged: true
  capabilities:
    add:
      - NET_ADMIN
      - NET_RAW
